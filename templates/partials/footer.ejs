<footer class="site-footer">
  <div class="footer-inner">
    <div class="footer-info">
      <p>&copy; <%= new Date().getFullYear() %> <%= locals.site ? locals.site.title : '' %>. All rights reserved.</p>
      <p>Powered by <a href="https://nodejs.org" target="_blank">Node.js</a> Static Blog Generator</p>
    </div>
  </div>
</footer>
</div>

<!-- KaTeX 数学公式 -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
<script>
  // 自动渲染（页面初始加载的内容）
  document.addEventListener('DOMContentLoaded', function() {
    renderMathInElement(document.body, {
      delimiters: [
        { left: String.fromCharCode(36,36), right: String.fromCharCode(36,36), display: true },
        { left: String.fromCharCode(36), right: String.fromCharCode(36), display: true },
        { left: '\\(', right: '\\)', display: false },
        { left: '\\[', right: '\\]', display: true }
      ],
      throwOnError: false,
      errorColor: '#ff0000'
    });
  });

  // 手动渲染（适配动态内容）
  function renderKaTeX(latexCode, targetEl, isDisplay) {
    try {
      katex.render(latexCode, targetEl, {
        displayMode: isDisplay || false,
        throwOnError: false,
        errorColor: '#ff0000'
      });
    } catch (e) {
      console.error('公式渲染失败：', e);
      targetEl.textContent = latexCode;
    }
  }
</script>

<!-- Mermaid 流程图 -->
<script src="https://cdn.jsdelivr.net/npm/mermaid@10.7.0/dist/mermaid.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    mermaid.initialize({
      startOnLoad: true,
      theme: 'default',
      securityLevel: 'loose',
      flowchart: { useMaxWidth: true }
    });
  });
</script>

<!-- 自定义脚本 -->
<script src="<%= locals.base || '' %>/js/main.js"></script>
</body>
</html>
